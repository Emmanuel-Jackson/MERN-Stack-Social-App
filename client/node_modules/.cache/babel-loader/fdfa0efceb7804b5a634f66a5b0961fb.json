{"ast":null,"code":"import _toConsumableArray from\"/home/emjackson/Memories_App/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/emjackson/Memories_App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Container,Grow,Grid,Paper,AppBar,TextField,Button}from'@material-ui/core';import{useNavigate,useLocation}from'react-router-dom';import ChipInput from'material-ui-chip-input';import Posts from'../Posts/Posts';import Pagination from'../Pagination';import{useDispatch}from'react-redux';import{getPosts,getPostsBySearch}from'../../actions/posts';import Form from'../Form/Form';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){function useQuery(){return new URLSearchParams(useLocation().search);}var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];var classes=useStyles();var dispatch=useDispatch();var query=useQuery();var navigate=useNavigate();var page=query.get('page')||1;var searchQuery=query.get('searchQuery');var searchPost=function searchPost(){if(search.trim()||tags){dispatch(getPostsBySearch({search:search,tags:tags.join(',')}));navigate(\"/posts/search?searchQuery=\".concat(search||'none',\"&tags=\").concat(tags.join(',')));}else{navigate('/');}};var handleKeyPress=function handleKeyPress(e){if(e.keyCode===13){searchPost();}};var handleAddChip=function handleAddChip(tag){return setTags([].concat(_toConsumableArray(tags),[tag]));};var handleDeleteChip=function handleDeleteChip(chipToDelete){return setTags(tags.filter(function(tag){return tag!==chipToDelete;}));};return/*#__PURE__*/_jsx(Grow,{in:true,children:/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",children:/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:\"space-between\",alignItems:\"stretch\",spacing:3,className:classes.gridContainer,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:9,children:/*#__PURE__*/_jsx(Posts,{setCurrentId:setCurrentId})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:4,md:3,children:[/*#__PURE__*/_jsxs(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsx(TextField,{name:\"search\",variant:\"outlined\",onKeyPress:handleKeyPress,label:\"Search Memories\",fullWidth:true,value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/_jsx(ChipInput,{style:{margin:'10px 0'},value:tags,onAdd:handleAddChip,onDelete:handleDeleteChip,label:\"Search Tags\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:searchPost,className:classes.searchButton,color:\"primary\",children:\"Search\"})]}),/*#__PURE__*/_jsx(Form,{currentId:currentId,setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/_jsx(Paper,{elevation:6,className:classes.pagination,children:/*#__PURE__*/_jsx(Pagination,{page:page})})]})]})})});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","Container","Grow","Grid","Paper","AppBar","TextField","Button","useNavigate","useLocation","ChipInput","Posts","Pagination","useDispatch","getPosts","getPostsBySearch","Form","useStyles","Home","useQuery","URLSearchParams","search","currentId","setCurrentId","setSearch","tags","setTags","classes","dispatch","query","navigate","page","get","searchQuery","searchPost","trim","join","handleKeyPress","e","keyCode","handleAddChip","tag","handleDeleteChip","chipToDelete","filter","gridContainer","appBarSearch","target","value","margin","searchButton","length","pagination"],"sources":["/home/emjackson/Memories_App/client/src/components/Home/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Container, Grow, Grid, Paper, AppBar, TextField, Button } from '@material-ui/core';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport ChipInput from 'material-ui-chip-input'\nimport Posts from '../Posts/Posts';\nimport Pagination from '../Pagination';\nimport { useDispatch } from 'react-redux';\nimport { getPosts, getPostsBySearch } from '../../actions/posts';\nimport Form from '../Form/Form';\nimport useStyles from './styles';\n\nconst Home = () => {\n\n  function useQuery() {\n    return new URLSearchParams(useLocation().search)\n  }\n\n    const [currentId, setCurrentId] = useState(0);\n    const [search, setSearch] = useState('')\n    const [tags, setTags] = useState([])\n    const classes = useStyles()\n    const dispatch = useDispatch()\n    const query = useQuery()\n    const navigate = useNavigate()\n    const page = query.get('page') || 1\n    const searchQuery = query.get('searchQuery')\n\n\n      \n    const searchPost = () => {\n      if (search.trim() || tags) {\n        dispatch(getPostsBySearch({ search, tags: tags.join(',') }));\n        navigate(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`);\n      } else {\n        navigate('/');\n      }\n    };\n  \n    const handleKeyPress = (e) => {\n      if (e.keyCode === 13) {\n        searchPost();\n      }\n    };\n  \n    const handleAddChip = (tag) => setTags([...tags, tag]);\n  \n    const handleDeleteChip = (chipToDelete) => setTags(tags.filter((tag) => tag !== chipToDelete));\n      \n    return (\n      <Grow in>\n      <Container maxWidth='xl'>\n        <Grid container justifyContent=\"space-between\" alignItems=\"stretch\" spacing={3} className={classes.gridContainer}>\n          <Grid item xs={12} sm={6} md={9}>\n            <Posts setCurrentId={setCurrentId}/>\n          </Grid>\n          <Grid item xs={12} sm={4} md={3}>\n            <AppBar className={classes.appBarSearch} position='static' color='inherit'>\n              <TextField \n                name='search' \n                variant='outlined' \n                onKeyPress={handleKeyPress}\n                label=\"Search Memories\"\n                fullWidth\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n              />\n              <ChipInput \n                style={{margin: '10px 0'}}\n                value={tags}\n                onAdd={handleAddChip}\n                onDelete={handleDeleteChip}\n                label='Search Tags'\n                variant='outlined'\n              />\n              <Button variant='contained' onClick={searchPost} className={classes.searchButton} color='primary'>Search</Button>\n            </AppBar>\n            <Form currentId={currentId} setCurrentId={setCurrentId}/>\n            {(!searchQuery && !tags.length) && (\n              <Paper elevation={6} className={classes.pagination}>\n                <Pagination page={page}/>\n              </Paper>\n            )}\n          </Grid>\n        </Grid>\n      </Container>\n    </Grow>\n    )\n}\n\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module"}