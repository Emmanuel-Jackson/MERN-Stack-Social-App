{"ast":null,"code":"import _regeneratorRuntime from\"/home/emjackson/MERN Stack Social App/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/emjackson/MERN Stack Social App/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/emjackson/MERN Stack Social App/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from'react';import{Typography,TextField,Button}from'@material-ui/core';import{useDispatch}from'react-redux';import{commentPost}from'../../actions/posts';import{Link}from'react-router-dom';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommentSection=function CommentSection(_ref){var _user$result2,_user$result3;var post=_ref.post;var user=JSON.parse(localStorage.getItem('profile'));var _useState=useState(''),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];var dispatch=useDispatch();var _useState3=useState(post===null||post===void 0?void 0:post.comments),_useState4=_slicedToArray(_useState3,2),comments=_useState4[0],setComments=_useState4[1];var classes=useStyles();var commentsRef=useRef();var handleComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _user$result;var newComments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(commentPost(\"\".concat(user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name,\": \").concat(comment),post._id));case 2:newComments=_context.sent;setComment('');setComments(newComments);commentsRef.current.scrollIntoView({behavior:'smooth'});case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleComment(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.commentsOuterContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.commentsInnerContainer,children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:\"Comments\"}),comments===null||comments===void 0?void 0:comments.map(function(c,i){return/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"subtitle1\",children:c},i);}),/*#__PURE__*/_jsx(\"div\",{ref:commentsRef})]}),(user===null||user===void 0?void 0:(_user$result2=user.result)===null||_user$result2===void 0?void 0:_user$result2.name)&&/*#__PURE__*/_jsxs(\"div\",{style:{width:'70%'},children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:\"Write a comment\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,rows:4,variant:\"outlined\",label:\"Comment\",multiline:true,value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{style:{marginTop:'10px'},fullWidth:true,disabled:!comment.length,color:\"primary\",variant:\"contained\",onClick:handleComment,children:\"Comment\"})]}),!(user!==null&&user!==void 0&&(_user$result3=user.result)!==null&&_user$result3!==void 0&&_user$result3.name)&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",font:\"true\",children:\"To leave a comment, please sign in to Snap Memories\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{style:{marginTop:'15px'},fullWidth:true,component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})]})]})});};export default CommentSection;","map":{"version":3,"names":["React","useState","useRef","Typography","TextField","Button","useDispatch","commentPost","Link","useStyles","CommentSection","post","user","JSON","parse","localStorage","getItem","comment","setComment","dispatch","comments","setComments","classes","commentsRef","handleComment","result","name","_id","newComments","current","scrollIntoView","behavior","commentsOuterContainer","commentsInnerContainer","map","c","i","width","e","target","value","marginTop","length"],"sources":["/home/emjackson/MERN Stack Social App/client/src/components/PostDetails/CommentSection.js"],"sourcesContent":["import React, { useState, useRef } from 'react'\nimport { Typography, TextField, Button } from '@material-ui/core'\nimport { useDispatch } from 'react-redux'\nimport { commentPost } from '../../actions/posts'\nimport { Link } from 'react-router-dom';\n\nimport useStyles from './styles'\n\nconst CommentSection = ({ post }) => {\n  const user = JSON.parse(localStorage.getItem('profile'));\n  const [comment, setComment] = useState('');\n  const dispatch = useDispatch();\n  const [comments, setComments] = useState(post?.comments);\n  const classes = useStyles();\n  const commentsRef = useRef();\n\n  const handleComment = async () => {\n    const newComments = await dispatch(commentPost(`${user?.result?.name}: ${comment}`, post._id));\n\n    setComment('');\n    setComments(newComments);\n\n    commentsRef.current.scrollIntoView({ behavior: 'smooth' });\n  };\n    return (\n        <div>\n        <div className={classes.commentsOuterContainer}>\n          <div className={classes.commentsInnerContainer}>\n            <Typography gutterBottom variant=\"h6\">Comments</Typography>\n            {comments?.map((c, i) => (\n              <Typography key={i} gutterBottom variant=\"subtitle1\">\n                {c}\n              </Typography>\n            ))}\n            <div ref={commentsRef} />\n          </div>\n          {user?.result?.name && (\n          <div style={{ width: '70%' }}>\n            <Typography gutterBottom variant=\"h6\">Write a comment</Typography>\n            <TextField fullWidth rows={4} variant=\"outlined\" label=\"Comment\" multiline value={comment} onChange={(e) => setComment(e.target.value)} />\n            <br />\n            <Button style={{ marginTop: '10px' }} fullWidth disabled={!comment.length} color=\"primary\" variant=\"contained\" onClick={handleComment}>\n              Comment\n            </Button>\n          </div>\n          )}\n          {!user?.result?.name && (\n            <div>\n            <Typography variant=\"subtitle1\" font=\"true\">To leave a comment, please sign in to Snap Memories</Typography>\n            <br />\n            <Button style={{ marginTop: '15px' }} fullWidth component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\n            </div>\n          )}\n        </div>\n      </div>\n    )\n}\n\n\nexport default CommentSection"],"mappings":"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"},"metadata":{},"sourceType":"module"}